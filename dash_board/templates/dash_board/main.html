{% extends 'home/base.html' %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>{% block title %} Dash Board | {{user.username}} {% endblock %} </title>

    {% load static %}
    <!-- Bootstrap -->
    <link href="{% static 'home/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'home/base_style.css' %}" rel="stylesheet">
    
  </head>

  <body>

    {% block content %}

    {% for message in messages %}

        <script> alert("{{message}}") </script>

    {% endfor %}

    <div class="container" style="margin-top: 20px;">
        <div class="row">
            <a href="{% url 'dash_board:all_students' user.class.id %}">
            <div class="col-md-4" id="box">
                <div style="background-color: lavender; text-align: center; min-height: 200px; margin: 3px; border-radius: 5px;">
                    <div style="position: relative; top: 80px; font-family: poppins;">
                        <span class="glyphicon glyphicon-folder-open"> <b style="font-size: 19px; font-family: poppins; font-weight: normal;"> STUDENTS - {{user.class.class_code}}</b> <br> <b style="font-size: 18px;"> {{the_user.class.student_set.count}} </b> </span>
                    </div>
                </div>
            </div>
            </a>

            <a href="{% url 'dash_board:subjects' %}">
            <div class="col-md-4" id="box">
                <div style="background-color: lavender; text-align: center; min-height: 200px; margin: 3px; border-radius: 5px;">
                    <div style="position: relative; top: 80px; font-family: poppins;">
                        
                        <span class="glyphicon glyphicon-education"> <b style="font-size: 19px; font-family: poppins; font-weight: normal;">SUBJECTS</b> <br> <b style="font-size: 18px;"> {{the_user.subject_set.count}} </b>  </span>
                        
                    </div>
                </div>
            </div>
            </a>

            <a href="{% url 'all_transcripts:full_transcript' %}">
            <div class="col-md-4" id="box">
                <div style="background-color: lavender; text-align: center; min-height: 200px; margin: 3px; border-radius: 5px;">
                    <div style="position: relative; top: 80px;">
                        <p> <b style="font-size: 19px; font-family: poppins; font-weight: normal;"> <span class="glyphicon glyphicon-user"></span> TRANSCRIPTS</b> <br> <b>{{the_user.class.student_set.count}}</b>
                    </div>
                </div>
            </div>
            </a>

            <div class="col-md-8">
                <div style="min-height: 500px; margin: 3px; border-radius: 5px;" class="table-responsive">
                    <table class="table table-striped table-hover table-info" style="min-height: 100px;">
                        <thead>
                            <tr class="info">
                                <th>#</th>
                                <th>Name</th>
                                <th>Date of Birth</th>
                                <th>Gender</th>
                                <th>Grade Status</th>
                                <th>Add Score</th>
                                <th>Edit</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for data in the_user.class.student_set.all %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{data.first_name}} {{data.last_name}}</td>
                                <td>{{data.dob}}</td>
                                <td>{{data.gender}}</td>
                                    {% if data.grade_set.count != user.subject_set.count %}
                                        <td style="color: red;">Incomplete</td>
                                    {% else %}
                                        <td style="color: green;"><span class="glyphicon glyphicon-ok"></span> Compelete</td>
                                    {% endif %}
                                <td> <a href="" data-target="#subject{{data.id}}" data-toggle="modal"> <span class="glyphicon glyphicon-plus"></span> Add</a></td>
                                <td> <a href="{% url 'dash_board:edit_score_page' data.id %}"> <span class="glyphicon glyphicon-edit"></span> Edit Score</a></td>
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>

            <div class="col-md-4">
                <div style="background-color: lavender; min-height: 100px; margin: 3px; border-radius: 5px;">
                    <div class="container-fluid" style="padding: 10px;">
                        <form class="form" action="{% url 'dash_board:subject_upload' %}" method="post" onsubmit="return confirm('Do you want to continue?')">
                            {% csrf_token %}
                            <h3>Subject Upload</h3> <hr>

                            <input type="hidden" name="user_id" value="{{user.id}}">

                            <div class="form-group">
                                <label for="s_code">Subject Code</label>
                                <input type="text" name="subject_code" id="s_code" class="form-control" placeholder="Subject Code" required>
                            </div>
    
                            <div class="form-group">
                                <label for="s_name">Subject Name</label>
                                <input type="text" name="subject_name" class="form-control" id="s_name" placeholder="Subject Name" required>
                            </div>

                            <button class="btn btn-primary">Upload</button>
                        </form>
                    </div>
                </div>
            </div>
            

            <!--First Three Stundents-->
            <div class="col-md-4" id="box">
                <div style="background-color: lavender; min-height: 100px; margin: 3px; border-radius: 5px;">
                    <div class="list-group">
                        <a href="" class="list-group-item list-group-item-info"> <h3 class="list-group-item-heading"> <span class="glyphicon glyphicon-education"></span> First Three Students</h3> </a>
                        <a href="" class="list-group-item">Emmanuel Adutwum <span class="badge">1</span> </a>
                        <a href="" class="list-group-item">Samuel Kyei <span class="badge">2</span> </a>
                        <a href="" class="list-group-item">Samuel Kyei <span class="badge">3</span> </a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    <div class="container">
        {% for dat in the_user.class.student_set.all %}
        <div class="modal fade" id="subject{{dat.id}}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                       <h4> Grades Upload - {{dat.first_name}} {{dat.last_name}} </h4>
                    </div>

                    <div class="modal-body">
                        <div class="container-fluid">
                            <form action="{% url 'dash_board:add_score' %}" class="form" method="post" onsubmit="return confirm('Do you want to continue?')">
                                {% csrf_token %}
                                <input type="hidden" name="student_id" value="{{dat.id}}">
                                <div class="form-group">
                                    <label>Select Subject</label>
                                    <select name="subject" class="form-control" required>
                                        <option></option>
                                        {% for data in the_user.subject_set.all %}
                                            <option value="{{data.id}}">{{data.subject_name}} - {{data.subject_code}} </option>                                          
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="form-group">
                                    <input type="text" name="assessment" placeholder="C.A (40)" class="form-control">
                                </div>

                                <div>
                                    <input type="text" name="exam" placeholder="Exam Score (100)" class="form-control">
                                </div>

                                <div style="margin-top: 10px;">
                                    <button class="btn btn-primary">Upload</button> 
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-danger" data-dismiss="modal"> <span class="glyphicon glyphicon-remove-sign"></span> Close</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endblock %}

  
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="{% static 'home/jquery.min.js' %}"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{% static 'home/bootstrap/js/bootstrap.min.js' %}"></script>
  </body>
</html>